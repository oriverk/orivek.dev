---
create: '2024-07-01'
update: '2024-07-25'
title: 'Flutterã‚’ã‚„ã£ã¦ã¿ã‚‹'
tags: [flutter]
published: true
---

ã€Œã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªãŒå‹•ã‹ãªããªã£ãŸã€ã¨ã„ã†å‹äººã®æŠ•ç¨¿ã‚’è¦‹ã¦ã€å±…ä½è‡ªæ²»ä½“ãŒé…å¸ƒã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€è¤‡æ•°ã®ä¸å…·åˆç­‰ã‚’è¦‹ã¤ã‘ãŸã®ãŒãã£ã‹ã‘ã§ã—ãŸã€‚ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹çŸ¥è­˜ãŒå…¨ãç„¡ã„çŠ¶æ…‹ã§è‡ªæ²»ä½“ã«å ±å‘Šã™ã‚‹ã®ã‚‚ãƒ»ãƒ»ãƒ»ã¨æ€ã£ãŸã®ã§ã€Flutter ã‚’è§¦ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

ã¡ãªã¿ã«ã€ã“ã®ã‚¢ãƒ—ãƒªã¯ [Apache Cordova](https://cordova.apache.org/) è£½ã§ã—ãŸã€‚

[![Image from Gyazo](https://i.gyazo.com/be4cd4904180fda733f325b17e8f0fc5.png)](https://gyazo.com/be4cd4904180fda733f325b17e8f0fc5)

https://flutter.dev/

## æ„Ÿæƒ³ãƒ»ã¾ã¨ã‚

- RAM 16GB ã§ã¯è¶³ã‚Šãªã„
- ã‚„ã‚‹å‰ã«ä½•åº¦ã‹è¦‹ã‹ã‘ã¦ã„ãŸã€Flutter ã¯ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™º FW ã§ã‚ã‚‹ãŒã€Android ã¨ iOS ã‚¢ãƒ—ãƒªé–‹ç™ºã«è¦ã™ã‚‹åŠ´åŠ›ãŒåŠåˆ†ã«ãªã‚‹è¨³ã§ã¯ãªã„ã€ã¨ã„ã†è¨€èª¬ã®ç†ç”±ãŒä½•ã¨ãªãåˆ†ã‹ã‚Šã¾ã—ãŸ
  - Material Components ã‚’ä½¿ç”¨ã™ã‚‹ãªã‚‰ã‚ã‚‹ç¨‹åº¦ã¯æ¥½ã§ãã‚‹ãŒã€ç‹¬è‡ªãƒ‡ã‚¶ã‚¤ãƒ³ã«ãªã‚‹ã¨é›£æ˜“åº¦ãŒæ€¥ã«ä¸ŠãŒã‚‹
  - Dart ã¨ Flutter ã ã‘ãªã‚‰å­¦ç¿’ã‚³ã‚¹ãƒˆã¯å¤§ã—ãŸã“ã¨ãŒç„¡ã„ãŒã€å¿…è¦ã«å¿œã˜ã¦ Kotolin ãã—ã¦ Android è‡ªä½“ã‚’ã‚‚æŠŠæ¡ã—ã¦ä½œæˆã™ã‚‹ã®ã¯å¤§å¤‰ãƒ»ãƒ»ãƒ»iOS ã ã¨ Swift ã‚‚

## not yet / do it later

- [Riverpod](https://riverpod.dev/ja/)
- [yumemi-inc/flutter-training-template: æ ªå¼ä¼šç¤¾ã‚†ã‚ã¿ Flutter ç ”ä¿®](https://github.com/yumemi-inc/flutter-training-template)
  - Weather Frecast App
- [yumemi-inc/flutter-engineer-codecheck: This is a code check task for Flutter engineers employment in YUMEMI.](https://github.com/yumemi-inc/flutter-engineer-codecheck)
  - like GitHub App clone

## did it

[Flutter Learn](https://flutter.dev/learn) ã‚’æ‰‹ã‚’å‹•ã‹ã—ãªãŒã‚‰èª­ã¿çµ‚ãˆã¾ã—ãŸãŒã€Widget ã«ä½•ãŒã‚ã‚‹ã‹ã€Flutter/Dart ç‰¹æœ‰ã®æ›¸ãæ–¹ã¨ã„ã£ãŸã‚‚ã®ã‚’æ›´ã«ç†è§£ã™ã‚‹ãŸã‚ã€Zenn ã‚„ Google Codelab ç­‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚Šã¾ã—ãŸã€‚

https://github.com/oriverk/learn_flutter

- [ã„ã¡ã‹ã‚‰å§‹ã‚ã‚‹Flutterãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™º](https://zenn.dev/heyhey1028/books/flutter-basics)
  - http, webview_flutter
- [åˆã‚ã¦ã® Flutter ã‚¢ãƒ—ãƒª](https://codelabs.developers.google.com/codelabs/flutter-codelab-first?hl=ja#0)
- [Flutter ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆæ–¹æ³•](https://codelabs.developers.google.com/codelabs/flutter-app-testing?hl=ja#0)
  - routing with go_router, tests; unit test, widget test, perf test
- [Flutter ã‚¢ãƒ—ãƒªã« Google ãƒãƒƒãƒ—ã‚’è¿½åŠ ã™ã‚‹ | Google Codelabs](https://codelabs.developers.google.com/codelabs/google-maps-in-flutter?hl=ja#0)
  - google_maps_flutter, http, json_serializable
- [MDC-101 Flutter: ãƒãƒ†ãƒªã‚¢ãƒ« ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åŸºæœ¬](https://codelabs.developers.google.com/codelabs/mdc-101-flutter?hl=ja#0)
  - backdrops, custom fonts, gridview
- [ãƒãƒ†ãƒªã‚¢ãƒ« 3 ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– ã‚¢ãƒ—ãƒª ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œæˆã™ã‚‹](https://codelabs.developers.google.com/codelabs/flutter-animated-responsive-layout?hl=ja#0)
- [Flutter ã‚¢ãƒ—ãƒªã‚’ã€Œé€€å±ˆãªã‚¢ãƒ—ãƒªã€ã‹ã‚‰ã€Œè¦‹æ „ãˆã®è‰¯ã„ã‚¢ãƒ—ãƒªã€ã«å¤‰ãˆã‚‹](https://codelabs.developers.google.com/codelabs/flutter-boring-to-beautiful?hl=ja#0)
- [Flutter ç”¨ã®ãƒãƒ†ãƒªã‚¢ãƒ« ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¾ã—ã„ç§»è¡Œã‚’ä½œæˆã™ã‚‹](https://codelabs.developers.google.com/codelabs/material-motion-flutter?hl=ja#0)
- é›»æ± æ®‹é‡ã¨å……é›»çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹ã‚¢ãƒ—ãƒª
  - [Platform-specific code | Flutter](https://docs.flutter.dev/platform-integration/platform-channels)
  - [é›»æ± æ®‹é‡ã¨å……é›»çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹  |  App quality  |  Android Developers](https://developer.android.com/training/monitoring-device-state/battery-monitoring?hl=ja#kotlin)
- [Firebase for Flutter ã‚’ç†è§£ã™ã‚‹](https://firebase.google.com/codelabs/firebase-get-to-know-flutter?hl=ja#0)
- [codelabs/firebase-get-to-know-flutter at main Â· flutter/codelabs](https://github.com/flutter/codelabs/tree/main/firebase-get-to-know-flutter)
  - [firebase/flutterfire: ğŸ”¥ A collection of Firebase plugins for Flutter apps.](https://github.com/firebase/flutterfire)

## notes

### commands

flutter create ã®å¾Œã«-e ã‚’ä»˜ã‘ã‚‹äº‹ã§æœ€å°æ§‹æˆã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚

```shell title=terminal
flutter create -e [project_name] --platforms=ios,android
```

run app

```shell title=terminal
flutter devices
flutter run -d [device_id]
```

### codelabs/google-maps-in-flutter

- [ã€Flutterã€‘ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ±ã‚’.envãƒ•ã‚¡ã‚¤ãƒ«ã§å–å¾—ã—ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã§åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã€GoogleMapã€‘](https://zenn.dev/ryota_exe/articles/2a42beac4ef1d8)
- [ã€Flutterã€‘ç’°å¢ƒã”ã¨ã®APIã‚­ãƒ¼ã‚’iOS/Androidãƒã‚¤ãƒ†ã‚£ãƒ–å´ã«è¨­å®šã™ã‚‹ã€Google Maps APIã€‘](https://zenn.dev/altiveinc/articles/flutter-set-native-api-keys-per-env)

```shell title=terminal
# deprecated
flutter pub run build_runner build --delete-conflicting-outputs
# use
dart run build_runner build --delete-conflicting-outputs
dart run build_runner build -d
```

### codelabs/flutter-boring-to-beautiful

- [Flutter ã‚¢ãƒ—ãƒªã‚’ã€Œé€€å±ˆãªã‚¢ãƒ—ãƒªã€ã‹ã‚‰ã€Œè¦‹æ „ãˆã®è‰¯ã„ã‚¢ãƒ—ãƒªã€ã«å¤‰ãˆã‚‹](https://codelabs.developers.google.com/codelabs/flutter-boring-to-beautiful?hl=ja#0)
- [codelabs/boring_to_beautiful at main Â· flutter/codelabs](https://github.com/flutter/codelabs/tree/main/boring_to_beautiful)
  - [flutter_bloc | Flutter package](https://pub.dev/packages/flutter_bloc)
    - Flutter Widgets that make it easy to implement the BLoC (Business Logic Component) design pattern. Built to be used with the bloc state management package
- [Material Theme Builder](https://material-foundation.github.io/material-theme-builder/)
- [Design tokens â€“ Material Design 3](https://m3.material.io/foundations/design-tokens/overview)
  - adaptive breakpoints for mobile, tablet, pc
    - [Responsive layout grid - Material Design](https://m2.material.io/design/layout/responsive-layout-grid.html)
    - [Applying layout â€“ Material Design 3](https://m3.material.io/foundations/layout/applying-layout/window-size-classes)

#### flutter_bloc

Flutter ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç®¡ç†ã‚’ç°¡ç´ åŒ–ã—ã€UI ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢ã‚’ä¿ƒé€²ã™ã‚‹ãŸã‚ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚çŠ¶æ…‹ç®¡ç†ãŒå®¹æ˜“ã«ãªã‚Šã€ã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆãŒã—ã‚„ã™ããªã‚‹ã€‚ã‚‰ã—ã„ã€‚

#### part of

```dart
part of 'playback_bloc.dart';
```

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„å¤§è¦æ¨¡ãªã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’åˆ†å‰²ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€‚è¤‡æ•°ã® Dart ãƒ•ã‚¡ã‚¤ãƒ«ã‚’1ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦æ‰±ã„ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã‚„ã‚³ãƒ¼ãƒ‰ã®æ•´ç†ãŒå®¹æ˜“ã«ãªã‚‹ã€‚ã‚‰ã—ã„ã€‚

#### class A with B {}

[learn_flutter/boring_to_beautiful/lib/src/shared/playback/bloc/playback_event.dart at main Â· oriverk/learn_flutter](https://github.com/oriverk/learn_flutter/blob/main/boring_to_beautiful/lib/src/shared/playback/bloc/playback_event.dart)

- `part of`
- `@Freezed()`
- `class A with B`
  - `class A extends B` ã¨ã¯é•ã†æ§˜å­

```dart
part of 'playback_bloc.dart';

@Freezed()
class PlaybackEvent with _$PlaybackEvent {}
```

- `class A extends B`
  - å˜ä¸€ç¶™æ‰¿
  - ã‚¯ãƒ©ã‚¹Aã¯ã‚¯ãƒ©ã‚¹Bã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ç¶™æ‰¿ã—ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã‚‹
  - å¼·ã„ç¶™æ‰¿é–¢ä¿‚ã‚’ç¤ºã™
- `class A with B`
  - è¤‡æ•°ã®ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ã‚’ä½¿ç”¨å¯èƒ½
  - ã‚¯ãƒ©ã‚¹Aã¯ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³Bã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã€ä»–ã®ç¶™æ‰¿é–¢ä¿‚ã«å½±éŸ¿ã‚’ä¸ãˆãªã„
  - å†åˆ©ç”¨å¯èƒ½ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹

#### extension A on B {}

[learn_flutter/boring_to_beautiful/lib/src/shared/extensions.dart at main Â· oriverk/learn_flutter](https://github.com/oriverk/learn_flutter/blob/main/boring_to_beautiful/lib/src/shared/extensions.dart)

```dart
extension DurationString on String {
  /// Assumes a string (roughly) of the format '\d{1,2}:\d{2}'
  Duration toDuration() => switch (split(':')) {
        [var minutes, var seconds] => Duration(
            minutes: int.parse(minutes.trim()),
            seconds: int.parse(seconds.trim()),
          ),
        [var hours, var minutes, var seconds] => Duration(
            hours: int.parse(hours.trim()),
            minutes: int.parse(minutes.trim()),
            seconds: int.parse(seconds.trim()),
          ),
        _ => throw Exception('Invalid duration string: $this'),
      };
}
```

[learn_flutter/boring_to_beautiful/lib/src/shared/providers/songs.dart at main Â· oriverk/learn_flutter](https://github.com/oriverk/learn_flutter/blob/main/boring_to_beautiful/lib/src/shared/providers/songs.dart)

```dart
final _songs = <RankedSong>[
  RankedSong(
    1,
    'Before You',
    ArtistsProvider.shared.getArtist('jmo')!,
    '2:45'.toDuration(),
    const MyArtistImage(
      image: 'assets/images/albums/artist6-album1.jpg',
      sourceLink: 'https://unsplash.com/photos/cTKGZJTMJQU',
      sourceName: 'Drew Dizzy Graham',
    ),
  ),
]
```

Dart è¨€èªã®æ©Ÿèƒ½ã§ã€æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ã«æ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã“ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€ãã®ã‚¯ãƒ©ã‚¹ã«æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã§ãã¾ã™ã€‚Flutter ã§ã‚‚ã“ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ã€æ¨™æº–ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚„ä»–ã®ã‚¯ãƒ©ã‚¹ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã§ãã¾ã™ã€‚(ChatGPT)

```dart
<!-- æ–‡å­—åˆ—ã‚¯ãƒ©ã‚¹ã«æ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ä¾‹ -->
<!-- Palindrome means å›æ–‡ -->
extension StringExtension on String {
  bool get isPalindrome {
    String normalized = this.toLowerCase().replaceAll(RegExp(r'[\W_]+'), '');
    return normalized == normalized.split('').reversed.join('');
  }
}

void main() {
  String text = 'A man a plan a canal Panama';
  print(text.isPalindrome); // true
}
```

### codelabs/material-motion-flutter

#### InkWell VS GestureDetector

- [flutterã‚¢ãƒ—ãƒªé–‹ç™ºã«ãŠã„ã¦InkWellã¨GestureDetectorã©ã¡ã‚‰ã‚’æ¡ç”¨ã™ã‚‹ã‹](https://zenn.dev/yuv_o/articles/e8a3a12e73b8aa)
- [Gestures | Flutter](https://docs.flutter.dev/cookbook/gestures)

#### SharedAxisTransition; ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã®å…±æœ‰è»¸ç§»è¡Œ

- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã®å…±æœ‰è»¸ç§»è¡Œã¯ã€SharedAxisTransition ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ã“ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ã¯æ¬¡ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™
  - fillColor: ç§»è¡Œä¸­ã®èƒŒæ™¯ã«ä½¿ç”¨ã•ã‚Œã‚‹è‰²
  - animation: å­ã®å‡ºå…¥ã‚Šã‚’æ“ä½œã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  - secondaryAnimation: æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå‰é¢ã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸã¨ãã«å­ã‚’ç§»è¡Œã•ã›ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  - transitionType: å…±æœ‰è»¸ç§»è¡Œã®ã‚¿ã‚¤ãƒ—ã‚’ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€æ°´å¹³ã€å‚ç›´ã‹ã‚‰é¸æŠã—ã¾ã™
  - child: ç§»è¡Œã—ãªãŒã‚‰å‡ºå…¥ã‚Šã™ã‚‹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ

æ…£ã‚Œã®å•é¡Œã ã¨æ€ã†ãŒã€`css` ã¨æ¯”è¼ƒã—ã¦éå¸¸ã«è¤‡é›‘ã ã¨æ„Ÿã˜ãŸã€‚å€‹äººçš„ã«ã¯ [boring_to_beautifulã®theme.dart](https://github.com/oriverk/learn_flutter/blob/main/boring_to_beautiful/lib/src/shared/providers/theme.dart) ã®ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãã‚‰ã„ã§ååˆ†ã€‚

```dart
import 'package:flutter/material.dart';

class ThemeProvider extends InheritedWidget {
  <!-- ... -->

  final pageTransitionsTheme = const PageTransitionsTheme(
    builders: <TargetPlatform, PageTransitionsBuilder>{
      TargetPlatform.android: FadeUpwardsPageTransitionsBuilder(),
      TargetPlatform.iOS: CupertinoPageTransitionsBuilder(),
      TargetPlatform.linux: NoAnimationPageTransitionsBuilder(),
      TargetPlatform.macOS: NoAnimationPageTransitionsBuilder(),
      TargetPlatform.windows: NoAnimationPageTransitionsBuilder(),
    },
  );

  <!-- ... -->
}
```

### battery level app

- references
  - [Platform-specific code | Flutter](https://docs.flutter.dev/platform-integration/platform-channels)
  - [FlutterJourney/Native Code in Flutter at main Â· EnricoGollner/FlutterJourney](https://github.com/EnricoGollner/FlutterJourney/tree/main/Native%20Code%20in%20Flutter)
  - [é›»æ± æ®‹é‡ã¨å……é›»çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹ | App quality  |  Android Developers](https://developer.android.com/training/monitoring-device-state/battery-monitoring?hl=ja#kotlin)

#### Which AndroidManifest.xml to edit in Flutter project?

- [android studio - Which AndroidManifest.xml to edit in Flutter project? - Stack Overflow](https://stackoverflow.com/questions/60095118/which-androidmanifest-xml-to-edit-in-flutter-project)

> Main AndroidManifest.xml file is located at 'Project' > app > src > main > AndroidManifest.xml. Other AndroidManifest.xml which are in debug folder and profile folder are systems generated when you are running a flutter app directly to mobile it will generate or while creating a flutter project. E.g: It is used for hot reload when the device is connected.

#### é›»æ± æ®‹é‡ã¨å……é›»çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹

- [MainActivity.kt](/batterylevel/android/app/src/main/kotlin/com/example/batterylevel/MainActivity.kt)
- [BatteryEventChannel.kt](/batterylevel/android/app/src/main/kotlin/com/example/batterylevel/BatteryEventChannel.kt)
- [é›»æ± æ®‹é‡ã¨å……é›»çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹  |  App quality  |  Android Developers](https://developer.android.com/training/monitoring-device-state/battery-monitoring?hl=ja#kotlin)

å……é›»çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç›£è¦–ã™ã‚‹

```kotlin
val batteryStatus: Intent? = IntentFilter(Intent.ACTION_BATTERY_CHANGED).let { ifilter ->
    context.registerReceiver(null, ifilter)
}
```

```kotlin
val status: Int = batteryStatus?.getIntExtra(BatteryManager.EXTRA_STATUS, -1) ?: -1
val isCharging: Boolean = status == BatteryManager.BATTERY_STATUS_CHARGING
        || status == BatteryManager.BATTERY_STATUS_FULL

// How are we charging?
val chargePlug: Int = batteryStatus?.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1) ?: -1
val usbCharge: Boolean = chargePlug == BatteryManager.BATTERY_PLUGGED_USB
val acCharge: Boolean = chargePlug == BatteryManager.BATTERY_PLUGGED_AC
```

ç¾åœ¨ã®é›»æ± æ®‹é‡ã‚’ç‰¹å®šã™ã‚‹

```kotlin
private fun getBatteryLevel(): Int {
    val batteryLevel: Int

    if (VERSION.SDK_INT >= VERSION_CODES.LOLLIPOP) {
      val batteryManager = getSystemService(Context.BATTERY_SERVICE) as BatteryManager
      batteryLevel = batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY)
    } else {
      // val intent = ContextWrapper(applicationContext).registerReceiver(null, IntentFilter(Intent.ACTION_BATTERY_CHANGED))
      // val level: Int = intent!!.getIntExtra(BatteryManager.EXTRA_LEVEL, -1)
      // val scale: Int = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1)
      // batteryLevel = level * 100 / scale

      // https://developer.android.com/training/monitoring-device-state/battery-monitoring?hl=ja#kotlin
      val batteryStatus: Intent? = IntentFilter(Intent.ACTION_BATTERY_CHANGED).let { ifilter ->
        context.registerReceiver(null, ifilter)
      }
      val batteryPct: Float? = batteryStatus?.let { intent ->
        val level: Int = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1)
        val scale: Int = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1)
        level * 100 / scale.toFloat()
      }
      batteryLevel = batteryPct as Int
    }

    return batteryLevel
  }
```

- æ¡ä»¶å¼ `VERSION.SDK_INT >= VERSION_CODES.LOLLIPOP`
  - ãƒ‡ãƒã‚¤ã‚¹ãŒ Android Lollipopï¼ˆAPI ãƒ¬ãƒ™ãƒ«21ï¼‰ä»¥ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ä½œã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
- `VERSION.SDK_INT`
  - ãƒ‡ãƒã‚¤ã‚¹ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ Android ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®å®šæ•°
- `VERSION_CODES.LOLLIPOP`
  - Android ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ Lollipopï¼ˆAPI ãƒ¬ãƒ™ãƒ«21ï¼‰ã‚’ç¤ºã™å®šæ•°

### codelabs/firebase-get-to-know-flutter

firebase setup on Windows

- [firebase/flutterfire: ğŸ”¥ A collection of Firebase plugins for Flutter apps.](https://github.com/firebase/flutterfire)

```shell title=terminal
dart pub global activate flutterfire_cli
```

install through [coreybutler/nvm-windows: A node.js version management utility for Windows. Ironically written in Go.](https://github.com/coreybutler/nvm-windows?tab=readme-ov-file)

```shell title=terminal
# run codes in administrator mode in powershell
nvm install lts
nmv use blah blah

npm install -g firebase-tools
firebase login

flutterfire configure
```
